<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNNS Chronotopos: Time as Recursion & The Klein Surface</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load D3.js for SVG animations (FIXED: Added D3.js script link) -->
    <script src="https://d3js.org/d3.v7.min.js"></script> 
    <!-- MathJax for Formulae -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <style>
        /* Base and Utility Styles */
        body {
            font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            background: #020617; /* Slate 950 */
            color: #f1f5f9;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        /* Hero Text Animation */
        @keyframes flow-pulse {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 255, 136, 0.5); }
            50% { box-shadow: 0 0 30px rgba(0, 255, 136, 1); }
        }

        .animated-hero {
            animation: flow-pulse 3s ease-in-out infinite;
        }

        /* Section Styling */
        .epilogue-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem 1rem;
            position: relative;
            z-index: 10;
        }

        .concept-card {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(5px);
            border: 1px solid #10b981; /* Emerald 500 border */
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.4);
        }

        .title-gradient {
            background: linear-gradient(90deg, #06b6d4, #10b981); /* Cyan to Emerald */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Canvas/SVG Styling for Klein Surface */
        #klein-surface-viz {
            width: 100%;
            height: 350px;
            background: radial-gradient(circle at center, rgba(16, 185, 129, 0.1), rgba(6, 45, 30, 0.5));
            border-radius: 1rem;
        }

        /* D3/SVG Animations */
        @keyframes recursion-flow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: 1000; }
        }

        .path-line {
            stroke-dasharray: 80 40;
            animation: recursion-flow 10s linear infinite;
            stroke-linecap: round;
        }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full p-4 bg-slate-950/90 backdrop-blur-md z-20 border-b border-slate-800">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <span class="text-2xl font-bold text-emerald-400">UNNS Chronotopos</span>
            <button class="text-sm px-4 py-2 bg-indigo-600 rounded-full hover:bg-indigo-500 transition" onclick="openReferences()">
                References & Theory
            </button>
        </div>
    </nav>

    <!-- 0. Hero Section: Time is what Recursues -->
    <section class="epilogue-section h-screen text-center" id="hero">
        <div class="max-w-5xl mx-auto p-8 animated-hero rounded-xl">
            <h1 class="text-7xl font-extrabold mb-6 title-gradient" style="text-shadow: 0 0 15px #06b6d4;">
                TIME IS NOT WHAT FLOWS. IT'S WHAT RECURSES.
            </h1>
            <p class="text-xl md:text-2xl text-slate-300 mt-6 max-w-4xl mx-auto">
                The UNNS framework defines the **Chronotopos**â€”a spacetime where **process replaces parameter**. Classical time $t$ is redefined as **recursion depth** $n$.
            </p>
            <div class="mt-8 text-2xl font-mono text-cyan-300">
                $t \rightarrow n \in \mathbb{N}$
            </div>
        </div>
    </section>

    <!-- 1. The Klein Surface: Non-Orientable Causality -->
    <section class="epilogue-section" id="klein-surface">
        <div class="max-w-6xl mx-auto p-8 concept-card rounded-2xl">
            <span class="text-5xl mb-4 block text-center title-gradient">Â§ I. THE TOPOLOGY OF TIME</span>
            <h2 class="text-3xl font-bold text-white mb-6 text-center">The Klein Surface: Entropy as Topological Folding</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                
                <!-- Visualization -->
                <div>
                    <svg id="klein-surface-viz" viewBox="0 0 400 300"></svg>
                    <p class="text-sm text-slate-500 text-center mt-2">Visualization of non-orientable recursive flow.</p>
                </div>

                <!-- Explanation -->
                <div class="space-y-4">
                    <p class="text-lg text-slate-300">
                        When UNNS recursion becomes partially reversible, the resulting manifold locally resembles the **Klein Surface** .
                    </p>
                    <div class="p-4 rounded-lg bg-red-900/30 border border-red-700/50">
                        <h3 class="font-semibold text-red-400">Entropy is Folding, Not Loss</h3>
                        <p class="text-sm text-slate-400">
                            Irreversibility is reframed not as chaos, but as a **topological obstruction** to global time coherence. Information is merely folded by the non-orientability, not destroyed.
                        </p>
                    </div>
                    <div class="p-4 rounded-lg bg-blue-900/30 border border-blue-700/50">
                        <h3 class="font-semibold text-blue-400">Local Time Symmetry</h3>
                        <p class="text-sm text-slate-400">
                            Local systems (oscillators, neural nets) may exhibit **time symmetry** because recursion allows paths to return to an earlier stateâ€”*not in space, but in meaning*.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 2. Philosophical Layer: Being and Becoming -->
    <section class="epilogue-section" id="philosophy">
        <div class="max-w-4xl mx-auto p-8 concept-card rounded-2xl text-center">
            <span class="text-5xl mb-4 block title-gradient">Â§ II. METAPHYSICS</span>
            <h2 class="text-3xl font-bold text-white mb-6">Existence is Coherent Iteration</h2>
            <p class="text-xl text-slate-300 mb-8">
                UNNS suggests a new ontology: existence is not *what persists*, but *what iterates coherently*. The recursive operator $\mathcal{F}$ becomes a metaphysical agent.
            </p>

            <div class="grid grid-cols-2 gap-6">
                <div class="p-4 bg-slate-700/50 rounded-lg">
                    <h3 class="text-2xl font-extrabold text-white">Causality</h3>
                    <p class="text-sm text-slate-400 mt-1">Emergent, not absolute. Defined by the local stability of the operator ($\mathcal{O}$).</p>
                </div>
                <div class="p-4 bg-slate-700/50 rounded-lg">
                    <h3 class="text-2xl font-extrabold text-white">Reversibility</h3>
                    <p class="text-sm text-slate-400 mt-1">Possible only within topological coherence zones of the Klein surface.</p>
                </div>
            </div>
            
            <p class="text-xl font-semibold text-emerald-400 mt-8">
                **Closing Reflection:** If classical physics tells us how things move, and computation tells us how things change, then UNNS hints at **how change itself folds back into being.**
            </p>
        </div>
    </section>

    <!-- 3. Final Synthesis & Call to Action -->
    <section class="epilogue-section h-[50vh]" id="conclusion">
        <div class="max-w-3xl mx-auto text-center p-8">
            <h2 class="text-4xl font-bold text-white mb-6">Explore the Recursive Chronotopos</h2>
            <p class="text-xl text-slate-300 mb-8">
                The UNNS framework unifies recursion, geometry, and time into a single conceptual playground. See the simulation platform that makes these ideas visual and interactive.
            </p>
            <a href="https://ukbbi.github.io/UNNS/docs/chronotopos/temporal_recursion/unns-tre-engine_v1.html" 
               target="_blank"
               class="inline-block px-8 py-4 text-xl font-semibold text-white bg-indigo-600 rounded-full hover:bg-indigo-500 transition duration-300 transform hover:scale-105">
                Launch the TRE Engine (Temporal Recursion Explorer) ðŸ’»
            </a>
        </div>
    </section>

    <!-- Reference Modal -->
    <div id="reference-modal" class="fixed top-0 left-0 w-full h-full bg-black/90 backdrop-blur-md z-50 hidden items-center justify-center">
        <div class="modal-content bg-slate-800 p-8 rounded-xl max-w-2xl w-full border border-emerald-500 shadow-2xl shadow-emerald-900/50">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold title-gradient">Chronotopos References</h2>
                <button class="text-3xl text-white hover:text-red-500 transition" onclick="closeReferences()">Ã—</button>
            </div>
            <ul class="space-y-4">
                <li>
                    <a href="https://ukbbi.github.io/UNNS/docs/chronotopos/temporal_recursion/On the Possibility of Temporal Recursion in the UNNS Substrate.pdf" target="_blank" class="text-cyan-400 hover:text-cyan-300 font-semibold block">
                        ðŸ“„ On the Possibility of Temporal Recursion in the UNNS Substrate
                    </a>
                    <p class="text-sm text-slate-400">Formalizing the shift $t \rightarrow n$ and recursive time.</p>
                </li>
                <li>
                    <a href="https://ukbbi.github.io/UNNS/docs/chronotopos/temporal_recursion/UNNS and the Klein Surface.pdf" target="_blank" class="text-cyan-400 hover:text-cyan-300 font-semibold block">
                        ðŸ“„ UNNS and the Klein Surface
                    </a>
                    <p class="text-sm text-slate-400">Defining the topological manifold for reversible recursion.</p>
                </li>
                <li>
                    <a href="https://ukbbi.github.io/UNNS/docs/chronotopos/temporal_recursion/Temporal Recursion in the UNNS Substrate and Its Klein Surface Realization.pdf" target="_blank" class="text-cyan-400 hover:text-cyan-300 font-semibold block">
                        ðŸ“„ Temporal Recursion in the UNNS Substrate and Its Klein Surface Realization
                    </a>
                    <p class="text-sm text-slate-400">Unification of the temporal model and the geometric topology.</p>
                </li>
                <li>
                    <a href="https://ukbbi.github.io/UNNS/docs/chronotopos/temporal_recursion/Technical Appendix_UNNS Simulation Showcase .pdf" target="_blank" class="text-cyan-400 hover:text-cyan-300 font-semibold block">
                        ðŸ“„ Technical Appendix: UNNS Simulation Showcase
                    </a>
                    <p class="text-sm text-slate-400">Technical details for the TRE Engine visualization.</p>
                </li>
            </ul>
        </div>
    </div>

    <!-- JavaScript for Klein Surface and General Animations -->
    <script>
        // Modal functions
        function openReferences() {
            document.getElementById('reference-modal').classList.remove('hidden');
            document.getElementById('reference-modal').classList.add('flex');
        }

        function closeReferences() {
            document.getElementById('reference-modal').classList.add('hidden');
            document.getElementById('reference-modal').classList.remove('flex');
        }

        // D3/SVG Visualization for Klein Surface
        // Uses SVG to create a simplified, conceptual representation of the self-intersecting, non-orientable recursive flow.
        function drawKleinSurface() {
            // FIX: Ensure D3 is available before proceeding.
            if (typeof d3 === 'undefined') {
                console.error("D3 library not loaded. Cannot initialize visualization.");
                // Provide a static message instead of crashing
                document.getElementById('klein-surface-viz').innerHTML = 
                    '<div class="flex items-center justify-center h-full text-red-400">' + 
                    'Error: D3.js failed to load. Please check console/network.' +
                    '</div>';
                return;
            }
            
            const svg = d3.select("#klein-surface-viz");
            const width = +svg.attr("width") || 400;
            const height = +svg.attr("height") || 300;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // Clear old SVG content
            svg.selectAll('*').remove();

            // Draw central ring (local coherence zone)
            svg.append("circle")
                .attr("cx", centerX)
                .attr("cy", centerY)
                .attr("r", 50)
                .attr("stroke", "rgba(16, 185, 129, 0.5)")
                .attr("stroke-width", 2)
                .attr("fill", "rgba(16, 185, 129, 0.1)");

            // Draw the recursive path (simulated Klein bottle loop)
            const pathData = `
                M ${centerX - 100}, ${centerY - 50}
                C ${centerX - 50}, ${centerY - 150}, ${centerX + 50}, ${centerY - 150}, ${centerX + 100}, ${centerY - 50}
                S ${centerX + 150}, ${centerY + 100}, ${centerX}, ${centerY + 100}
                S ${centerX - 150}, ${centerY + 10}, ${centerX - 100}, ${centerY - 50}
            `;
            
            svg.append("path")
                .attr("d", pathData)
                .attr("class", "path-line")
                .attr("stroke", "#06b6d4") /* Cyan for recursion path */
                .attr("stroke-width", 4)
                .attr("fill", "none");

            // Add inner path for self-intersection/folding
            const innerPathData = `
                M ${centerX - 80}, ${centerY + 30}
                C ${centerX - 40}, ${centerY + 80}, ${centerX + 40}, ${centerY + 80}, ${centerX + 80}, ${centerY + 30}
            `;
            
            svg.append("path")
                .attr("d", innerPathData)
                .attr("stroke", "#10b981") /* Emerald for inner fold */
                .attr("stroke-width", 2)
                .attr("stroke-dasharray", "10 5")
                .attr("fill", "none");
            
            // Add self-reference point (the recursion)
            svg.append("circle")
                .attr("cx", centerX)
                .attr("cy", centerY)
                .attr("r", 10)
                .attr("fill", "#facc15") /* Yellow accent */
                .attr("stroke", "#1e40af")
                .attr("stroke-width", 3);

            // Add labels
            svg.append("text")
                .attr("x", centerX)
                .attr("y", centerY - 120)
                .attr("text-anchor", "middle")
                .attr("fill", "#f1f5f9")
                .attr("font-size", "14px")
                .text("Time $\\rightarrow$ Recursion Depth (n)");

            svg.append("text")
                .attr("x", centerX + 180)
                .attr("y", centerY + 10)
                .attr("text-anchor", "middle")
                .attr("fill", "#f1f5f9")
                .attr("font-size", "14px")
                .text("Local Reversibility");
            
        }

        // Initialize on load
        window.addEventListener('load', () => {
            // Apply D3 rendering to the SVG
            drawKleinSurface();
            
            // Re-render MathJax after D3 has added elements
            MathJax.typesetPromise();
        });
    </script>
</body>
</html>

