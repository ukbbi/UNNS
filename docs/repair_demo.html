<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>UNNS Repair Demo</title>
<style>
body { background:#0b0c10; color:white; font-family:Segoe UI; text-align:center; }
canvas { background:#1f2833; border-radius:8px; margin:20px auto; display:block; }
button { padding:10px 20px; margin:5px; background:#45a29e; border:none; border-radius:6px; color:white; cursor:pointer; }
button:hover { background:#66fcf1; color:black; }
</style>
</head>
<body>
<h1>ðŸ”§ UNNS Repair Showcase</h1>
<p>DNA-inspired repair operators for unstable UNNS nests</p>

<canvas id="repairCanvas" width="600" height="300"></canvas>

<div>
  <button onclick="applyProofreading()">Proofreading</button>
  <a href="https://ukbbi.github.io/UNNS/experiments/repairs/demo_repair.py" target="_blank" style="color:#66fcf1; font-size:0.9em; margin-left:8px;">[source]</a>

  <br>

  <button onclick="applyExcision()">Excision + Refit</button>
  <a href="https://ukbbi.github.io/UNNS/experiments/repairs/repair_operators.py" target="_blank" style="color:#66fcf1; font-size:0.9em; margin-left:8px;">[source]</a>

  <br>

  <button onclick="applyRenorm()">Global Renormalization</button>
  <a href="https://ukbbi.github.io/UNNS/experiments/repairs/diagnostics.py" target="_blank" style="color:#66fcf1; font-size:0.9em; margin-left:8px;">[source]</a>
</div>


<script>
let ctx = document.getElementById("repairCanvas").getContext("2d");
let seq = []; 
let coeffs = [1,1];

// init: fibonacci with corruption
function initSeq(n=40){
  seq=[0,1];
  for(let i=2;i<n;i++) seq.push(seq[i-1]+seq[i-2]);
  seq[20]+=50; // corruption
}
function drawSeq(){
  ctx.clearRect(0,0,600,300);
  ctx.beginPath();
  ctx.strokeStyle="#66fcf1";
  seq.forEach((v,i)=>{
    let x = 10+i*14, y = 150 - v*0.5;
    if(i==0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  });
  ctx.stroke();
}

function applyProofreading(){
  for(let i=2;i<seq.length;i++){
    let pred = coeffs[0]*seq[i-1]+coeffs[1]*seq[i-2];
    seq[i] = 0.2*seq[i] + 0.8*pred;
  }
  drawSeq();
}

function applyExcision(){
  for(let i=15;i<25;i++){
    let pred = coeffs[0]*seq[i-1]+coeffs[1]*seq[i-2];
    seq[i]=pred;
  }
  drawSeq();
}

function applyRenorm(){
  let norm = Math.sqrt(seq.reduce((s,v)=>s+v*v,0)/seq.length);
  seq = seq.map(v=>v/norm);
  drawSeq();
}

// init
initSeq(); drawSeq();
</script>
</body>
</html>

