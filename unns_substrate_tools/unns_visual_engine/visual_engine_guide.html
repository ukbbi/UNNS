<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNNS Visual Engine — Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            padding: 2rem;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            padding: 3rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 1rem;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
            to { text-shadow: 0 0 30px rgba(255, 255, 255, 0.8), 0 0 40px rgba(100, 126, 234, 0.8); }
        }

        .subtitle {
            text-align: center;
            font-size: 1rem;
            color: #ffd700;
            margin-bottom: 2rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        h2 {
            font-size: 1.8rem;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            color: #ffd700;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 0.5rem;
        }

        h3 {
            font-size: 1.3rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: #00ff88;
        }

        p {
            margin-bottom: 1rem;
            color: #e0e0e0;
        }

        .important {
            background: rgba(255, 215, 0, 0.1);
            border-left: 4px solid #ffd700;
            padding: 1rem;
            margin: 1.5rem 0;
            border-radius: 5px;
        }

        .operator {
            background: rgba(102, 126, 234, 0.2);
            padding: 0.75rem 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .operator-symbol {
            font-weight: bold;
            color: #ffd700;
            font-size: 1.1rem;
            margin-right: 0.5rem;
        }

        .invariant {
            background: rgba(0, 255, 136, 0.1);
            padding: 0.75rem 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            border-left: 3px solid #00ff88;
        }

        .invariant-name {
            font-weight: bold;
            color: #00ff88;
            margin-right: 0.5rem;
        }

        ul {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: #e0e0e0;
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 1rem 0;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.5);
        }

        .workflow-step {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem 1rem;
            margin: 0.5rem 0;
            border-radius: 5px;
            border-left: 3px solid #667eea;
        }

        .phase-table {
            width: 100%;
            margin: 1rem 0;
            border-collapse: collapse;
        }

        .phase-table th,
        .phase-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .phase-table th {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            font-weight: bold;
        }

        .phase-table td {
            background: rgba(255, 255, 255, 0.05);
        }

        code {
            background: rgba(0, 0, 0, 0.5);
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #00ff88;
        }

        .footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #888;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .container {
                padding: 1.5rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>UNNS VISUAL ENGINE</h1>
        <div class="subtitle">Substrate Instrument Guide</div>

        <div class="important">
            <strong>What this instrument is:</strong> UNNS Visual Engine is a substrate instrument for exploring operator-driven recursion in UNNS (Unbounded Nested Number Sequences). It does not "predict physics"; it produces UNNS-internal structure diagnostics.
        </div>

        <h2>The Workflow</h2>
        <div class="workflow-step">1. Pick Seed (M) and Parameter (N)</div>
        <div class="workflow-step">2. Choose an Operator Stack (Φ, Ψ, τ, XII)</div>
        <div class="workflow-step">3. Choose a Projection (2D / τ-Geometry 3D / Collapse View)</div>
        <div class="workflow-step">4. Optionally start τ-Flow to evolve the state over time</div>
        <div class="workflow-step">5. Read the Invariant Diagnostics and Structure Classification</div>
        <div class="workflow-step">6. Export JSON to preserve a run or τ-flow history</div>

        <h2>Controls</h2>

        <h3>Seed (M)</h3>
        <p>Sets the initial value of the recursion. Changing M changes the entire sequence and its invariants.</p>

        <h3>Parameter (N)</h3>
        <p>Controls Φ expansion intensity (how strongly Φ generates new values each application).</p>

        <h3>Node Count</h3>
        <p>Controls how many nodes are rendered (visual sampling). It does not change the underlying recursion—only the visualization density.</p>

        <h2>Operator Stack</h2>
        <p>Each operator can be toggled on/off. Operator order matters strongly—this is why <strong>commutativity</strong> is tracked as an invariant.</p>

        <div class="operator">
            <span class="operator-symbol">Φ</span> <strong>Generate:</strong> Expands the sequence through recursive growth. Creates new values from existing structure.
        </div>

        <div class="operator">
            <span class="operator-symbol">Ψ</span> <strong>Normalize:</strong> Constrains values into a stable range. Enforces consistency and prevents unbounded growth.
        </div>

        <div class="operator">
            <span class="operator-symbol">τ</span> <strong>Curvature:</strong> Applies damping and curvature to the sequence. Creates stability through compression.
        </div>

        <div class="operator">
            <span class="operator-symbol">XII</span> <strong>Collapse:</strong> Filters survivors based on threshold. Reality-enforcement stage that removes weak values.
        </div>

        <div class="important">
            <strong>Tip:</strong> Operator order matters. That is why "commutativity" is tracked. Φ→Ψ→τ→XII produces different results than XII→τ→Ψ→Φ.
        </div>

        <h2>Projections</h2>

        <h3>2D Abstract</h3>
        <p>A clean view of the graph structure. Shows nodes and connections in their base layout.</p>

        <h3>τ-Geometry 3D</h3>
        <p>A projection where depth (z-axis) encodes τ-pressure. <strong>This is not physical 3D space</strong>; it is a substrate projection showing curvature geometry. During τ-Flow, this projection becomes dynamic—nodes flow along τ-gradients and depth changes with evolving curvature.</p>

        <h3>Collapse View</h3>
        <p>Shows only post-XII survivors, with post-collapse reorganization. If the view looks "empty", that means collapse was strong—most values failed to survive the threshold.</p>

        <h2>τ-Flow (Evolution)</h2>
        <p>τ-Flow evolves the state over time by iteratively applying the operator stack. This is <strong>temporal recursion</strong>, not visualization animation.</p>

        <h3>Use τ-Flow to observe:</h3>
        <ul>
            <li><strong>Phase transitions:</strong> emergence → stable → overcurved → collapse</li>
            <li><strong>Topology changes:</strong> node births/deaths, edge rewiring</li>
            <li><strong>Invariant drift:</strong> how metrics stabilize or diverge over time</li>
            <li><strong>Structural irreversibility:</strong> two runs with same seed diverge under τ-noise</li>
        </ul>

        <h3>τ-Flow Phases</h3>
        <table class="phase-table">
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Condition</th>
                    <th>Behavior</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Emergence</strong></td>
                    <td>τ-stability &lt; 0.7</td>
                    <td>Φ operator active, nodes spawn, rapid growth</td>
                </tr>
                <tr>
                    <td><strong>Stable</strong></td>
                    <td>0.7 ≤ τ-stability ≤ 1.2</td>
                    <td>Ψ and τ active, balanced damping</td>
                </tr>
                <tr>
                    <td><strong>Overcurved</strong></td>
                    <td>τ-stability &gt; 1.2</td>
                    <td>Excessive curvature, edge rewiring intensifies</td>
                </tr>
                <tr>
                    <td><strong>Collapse</strong></td>
                    <td>survival ratio &lt; 0.3</td>
                    <td>XII operator triggers, topology destruction</td>
                </tr>
            </tbody>
        </table>

        <h3>Buttons</h3>
        <ul>
            <li><strong>▶ Start τ-Flow / ⏸ Pause:</strong> Begins or pauses evolution at 5 Hz (5 steps per second)</li>
            <li><strong>⟳ Reset τ-Flow:</strong> Clears evolution history and regenerates base state</li>
            <li><strong>Evolution View:</strong> Shows multi-invariant timeline with phase bands and event markers</li>
        </ul>

        <h2>Invariant Diagnostics</h2>
        <p>These are UNNS-internal invariants. They measure structural properties of the recursive state, not physical quantities.</p>

        <div class="invariant">
            <span class="invariant-name">τ-Stability:</span> Ratio of variance after τ / variance before τ. Near 1.0 means stable damping. Values below 0.7 indicate emergence; above 1.2 indicate overcurvature.
        </div>

        <div class="invariant">
            <span class="invariant-name">Survival Ratio:</span> Fraction of values surviving XII collapse. Lower values mean stronger reality-enforcement. Below 0.3 triggers collapse phase.
        </div>

        <div class="invariant">
            <span class="invariant-name">Coherence:</span> Smoothness of recursive differences (measures step-to-step variation). Higher coherence means smooth recursive progression.
        </div>

        <div class="invariant">
            <span class="invariant-name">Commutativity:</span> How sensitive the system is to operator order. Lower values mean operator sequence strongly matters. Values near 1.0 indicate order-independence.
        </div>

        <div class="invariant">
            <span class="invariant-name">Resonance:</span> Harmonic correlation in the value sequence. Higher resonance means strong periodic/harmonic structure.
        </div>

        <h3>Traffic-Light Coloring</h3>
        <ul>
            <li><strong style="color: #00ff88;">Green:</strong> Invariant in healthy range</li>
            <li><strong style="color: #ffd700;">Amber:</strong> Invariant in transition zone</li>
            <li><strong style="color: #ff4444;">Red:</strong> Invariant outside stable range</li>
        </ul>

        <h2>Structure Classification</h2>
        <p>A lightweight classifier describing the overall regime:</p>

        <ul>
            <li><strong>Stable Curved:</strong> Balanced τ-stability, low curvature, smooth evolution</li>
            <li><strong>Emergent Transitional:</strong> Low survival ratio or commutativity, rapid change</li>
            <li><strong>Ordered Recursive:</strong> High resonance and τ-stability, harmonic lock</li>
            <li><strong>Chaotic:</strong> Low coherence, high structural noise</li>
            <li><strong>Collapsed:</strong> XII operator triggered, minimal survivors</li>
        </ul>

        <h2>"Why This Pattern?" Button</h2>
        <p>Generates a natural-language explanation of the current structure using:</p>
        <ul>
            <li>Active operators in the stack</li>
            <li>Dominant invariant driving behavior</li>
            <li>Interpretation of collapse/resonance/stability</li>
            <li>Structure classification reasoning</li>
        </ul>

        <h2>Export JSON</h2>
        <p>The Export button creates a JSON file containing:</p>

        <h3>For Single-Run Mode:</h3>
        <ul>
            <li>Seed and parameters</li>
            <li>Operator stack trace</li>
            <li>Current invariants</li>
            <li>Structure classification</li>
            <li>State metrics (entropy, curvature, depth)</li>
            <li>First 20 values</li>
        </ul>

        <h3>For τ-Flow Mode:</h3>
        <p>All of the above, plus:</p>
        <ul>
            <li><strong>Steps:</strong> Number of evolution steps</li>
            <li><strong>Phase:</strong> Current τ-flow phase</li>
            <li><strong>Topology:</strong> Node and edge counts</li>
            <li><strong>Events:</strong> Timestamped structural events (node deaths, collapses)</li>
            <li><strong>History:</strong> Step-by-step invariants, classifications, and phases</li>
        </ul>

        <div class="important">
            <strong>Use exports for:</strong>
            <ul style="margin-top: 0.5rem; margin-bottom: 0;">
                <li>Sharing runs with collaborators</li>
                <li>Comparing different operator configurations</li>
                <li>Publishing chamber logs</li>
                <li>Replaying τ-flow evolution</li>
            </ul>
        </div>

        <h2>Audio Modes</h2>
        <p>Three sonification modes are available:</p>

        <ul>
            <li><strong>Follow Value:</strong> Frequency maps directly to value magnitude</li>
            <li><strong>Follow Structure:</strong> Frequency driven by resonance invariant, damped by τ-curvature</li>
            <li><strong>Follow Operator:</strong> Each operator (Φ, Ψ, τ, XII) maps to a musical ratio (golden, √2, √3, octave)</li>
        </ul>

        <h2>Technical Notes</h2>

        <h3>What τ-Flow Does</h3>
        <p>τ-Flow is not cosmetic animation. It performs:</p>
        <ul>
            <li><strong>Iterative operator application:</strong> Stack is reapplied every 200ms</li>
            <li><strong>Dynamic τ-field evolution:</strong> Curvature evolves via damping + noise</li>
            <li><strong>Structural mutations:</strong> Nodes spawn/die, edges rewire, topology changes</li>
            <li><strong>Operator gating:</strong> Different operators activate in different phases</li>
        </ul>

        <h3>What τ-Geometry Shows</h3>
        <p>The z-axis in τ-Geometry mode represents curvature pressure, not distance. During τ-Flow:</p>
        <ul>
            <li>Nodes drift along τ-gradients (toward/away from center)</li>
            <li>Depth modulates size and opacity</li>
            <li>Collapse compresses z → 0</li>
        </ul>

        <h3>Entropy Definition</h3>
        <p>Entropy is Shannon distribution entropy (10-bin histogram), not variance. It measures value distribution structure.</p>

        <h3>Non-Goals</h3>
        <p>This engine does <strong>not</strong>:</p>
        <ul>
            <li>Simulate physics</li>
            <li>Predict probabilities</li>
            <li>Train neural networks</li>
            <li>Claim external validity</li>
        </ul>
        <p>All outputs are UNNS-internal diagnostics.</p>

        <div style="text-align: center; margin-top: 2rem;">
            <a href="visual_engine_enhanced.html" class="btn">← Back to Engine</a>
        </div>

        <div class="footer">
            <p><strong>Guide v1.0</strong> — Compatible with UNNS Visual Engine (Phase-F τ-Flow)</p>
            <p>Build: 2025-12-14</p>
        </div>
    </div>
</body>
</html>
